---
sidebar_position: 5
---

# Prescription
Prescriptions are created by a [Medic](medic.md)  with a validated account. 

## List all Prescriptions
This endpoint will list all the prescriptions generated by the Token of the Medic.

The following parameters may be included as part of a URL query string.


|Parameter	| Description|
|--|--|
|limit	|Number of results to return per page.|
|offset|	The initial index from which to return the results.|

#### GET List all Prescriptions
```python title="GET /api/v2/rx-endpoint/"
import requests

url = "{{Base_URL}}/api/v2/rx-endpoint/"

headers = {
  'Authorization': 'Token {{Token}}'
}

response = requests.request("GET", url, headers=headers)

print(response.text)
```

#### Response to List all Prescriptions
```json title="[StatusCode: 200]"
{    
    "count": 2,
    "next": "{{Base_URL}}/api/v2/medics/?limit=15&offset=15",
    "previous": null,
    "results": [
        {
            "id": 2714,
            "hospital": {
                "id": 7,
                "patron": "Prescrypto",
                "location": "Avenida Paseo de la Reforma 369, Colonia Cuauhtémoc, Mexico City, CDMX, Mexico"
            },
            "clinic": null,
            "medic": "hola@prescrypto.com",
            "patient": {
                "uid": "1231231-123123-12313-123-123123123",
                "name": "Ely de Prescrypto",
                "email": "test@prescrpyot.com",
                "phone": "",
                "date_of_birth": "2000-03-13",
                "gender": "M"
            },
            "diagnosis": "",
            "medications": [
                {
                    "id": 393,
                    "presentation": "Aspirina 30 Tabletas (Ácido Acetilsalicílico 100 mg)",
                    "instructions": "Tomar una cada 8 horas",
                    "drug": "Aspirina 30 Tabletas (Ácido Acetilsalicílico 100 mg)",
                    "cost": 0.0,
                    "bought": false,
                    "qty": 1,
                    "bought_qty": 0,
                    "category": "standard_drug",
                    "qty_label": "",
                    "drug_upc": "1234567890"
                }
            ],
            "extras": "",
            "signature": "12345678990",
            "created_at": "2023-09-07",
            "sent": true,
            "send_rx": true,
            "show_diagnosis": false,
            "bought": false,
            "rejected": false,
            "cta_link": "",
            "status": {
                "rx_status": [
                    "available",
                    "Disponible"
                ],
                "sent_status": [
                    "sent_email",
                    "Email enviado"
                ]
            },
            "reason_of_rejected": ""
        },
        {
            "id": 2713,
            "hospital": {
                "id": 7,
                "patron": "Prescrypto",
                "location": "Avenida Paseo de la Reforma 369, Colonia Cuauhtémoc, Mexico City, CDMX, Mexico"
            },
            "clinic": null,
            "medic": "jason@prescrypto.com",
            "patient": {
                "uid": "1231231-123123-12313-123-123123123",
                "name": "Ely de Prescrypto",
                "email": "test@prescrpyto.com",
                "phone": "",
                "date_of_birth": "2000-03-13",
                "gender": "M"
            },
            "diagnosis": "",
            "medications": [
                {
                    "id": 3938,
                    "presentation": "Aspirina",
                    "instructions": "Tomar una cada 8 horas",
                    "drug": "Aspirina 30 Tabletas (Ácido Acetilsalicílico 100 mg)",
                    "cost": 0.0,
                    "bought": false,
                    "qty": 1,
                    "bought_qty": 0,
                    "category": "standard_drug",
                    "qty_label": "",
                    "drug_upc": "1234567890"
                }
            ],
            "extras": "",
            "signature": "1234567890",
            "created_at": "2023-09-08",
            "sent": true,
            "send_rx": true,
            "show_diagnosis": false,
            "bought": false,
            "rejected": false,
            "cta_link": "",
            "status": {
                "rx_status": [
                    "available",
                    "Disponible"
                ],
                "sent_status": [
                    "sent_email",
                    "Email enviado"
                ]
            },
            "reason_of_rejected": ""
        }
    ]
}
```
```json title="[Error: 401] Token invalid"
{
    "detail": "Token inválido."
}
```

### List a Single Prescription
You can also filter the information for a single prescription, by adding the prescription id to the endpoint route.

#### GET List a Single Prescription
```python title="GET /api/v2/rx-endpoint/{{rx_ID}}"
import requests
import json

url = "{{Base_URL}}/api/v2/rx-endpoint/{{rx_ID}}"

headers = {
  'Authorization': 'Token {{Token}}'
}

response = requests.request("GET", url, headers=headers)

print(response.text)
```
#### Response to List all Prescriptions
```json title="[StatusCode: 200]"
{   
    "count": 1,
    "next": "{{Base_URL}}/api/v2/medics/?limit=15&offset=15",
    "previous": null,
    "results": [
        {
            "id": 2714,
            "hospital": {
                "id": 7,
                "patron": "Prescrypto",
                "location": "Avenida Paseo de la Reforma 369, Colonia Cuauhtémoc, Mexico City, CDMX, Mexico"
            },
            "clinic": null,
            "medic": "hola@prescrypto.com",
            "patient": {
                "uid": "1231231-123123-12313-123-123123123",
                "name": "Ely de Prescrypto",
                "email": "test@prescrpyot.com",
                "phone": "",
                "date_of_birth": "2000-03-13",
                "gender": "M"
            },
            "diagnosis": "",
            "medications": [
                {
                    "id": 393,
                    "presentation": "Aspirina",
                    "instructions": "Tomar una cada 8 horas",
                    "drug": "Aspirina 30 Tabletas (Ácido Acetilsalicílico 100 mg)",
                    "cost": 0.0,
                    "bought": false,
                    "qty": 1,
                    "bought_qty": 0,
                    "category": "standard_drug",
                    "qty_label": "",
                    "drug_upc": "1234567890"
                }
            ],
            "extras": "",
            "signature": "12345678990",
            "created_at": "2023-09-07",
            "sent": true,
            "send_rx": true,
            "show_diagnosis": false,
            "bought": false,
            "rejected": false,
            "cta_link": "",
            "status": {
                "rx_status": [
                    "available",
                    "Disponible"
                ],
                "sent_status": [
                    "sent_email",
                    "Email enviado"
                ]
            },
            "reason_of_rejected": ""
        }
    ]
}
```
```json title="[Error: 404] Prescription not found"
{
    "detail": "No encontrado."
}
```
```json title="[Error: 401] Token invalid"
{
    "detail": "Token inválido."
}
```


## Create a Prescription

####POST Create a Prescription
```python title="POST /api/v2/rx-endpoint"
import requests
import json

url = "{{Base_URL}}/api/v2/rx-endpoint/"

payload = json.dumps({
  "diagnosis": "Gripe por virus de la gripe estacional identificado (1E30)",
  "medications": [
    {
      "presentation": "Ibuprofeno ",
      "instructions": "Tomar 1 pastilla cada 8 horas durante 7 dias",
    },
    {
      "presentation": "Aspirina Protect",
      "instructions": "Tomar 1 pastilla cada 8 horas durante 7 dias",
    }
  ],
  "extras": "Fiebre 38ºC, Cefaleas, escalofrios",
  "patient": {
    "uid":"123123-12312-12312-123-123123123"
  }
})
headers = {
  'Authorization': 'Token {{Token}}',
  'Content-Type': 'application/json'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)
```


#### Response to Create a Prescription
```json title="[StatusCode: 200] Success!"
{
    "id": 123,
    "hospital": 1,
    "clinic": null,
    "medic": "Elizabeth@prescrypto.com",
    "patient": {
        "uid": "123123-12312-12312-123-123123123",
        "name": "George Constanza",
        "email": "constanza@gmail.com"
    },
    "diagnosis": "Gripe por virus de la gripe estacional identificado (1E30)",
    "medications": [
        {
            "id": 22,
            "presentation": "Ibuprofeno",
            "instructions": "Tomar 1 pastilla cada 8 horas durante 7 dias",
            "cost": 0.0,
            "bought": false,
            "qty": 1,
            "bought_qty": 0,
            "drug_upc": "",
            "order_id": 0,
            "category": "standard_drug",
            "qty_label": "1"
        },
        {
            "id": 23,
            "presentation": "Aspirina Protect",
            "instructions": "Tomar 1 pastilla cada 8 horas durante 7 dias",
            "cost": 0.0,
            "bought": false,
            "qty": 1,
            "bought_qty": 0,
            "drug_upc": "",
            "order_id": 0,
            "category": "standard_drug",
            "qty_label": "1"
        }
    ],
    "extras": "Fiebre 38ºC, Cefaleas, escalofrios",
    "signature": "12sd2jaskjnd13",
    "created_at": "2020-06-30",
    "sent": null,
    "send_rx": true,
    "additional_data": {},
    "show_diagnosis": false,
    "rejected": false,
    "bought": false,
    "cta_link": ""
}

```
```json title="[Error: 400] The required field field_name is missing"
{
    "field_name": [
        "Este campo es requerido."
    ]
}
```
```json title="[Error: 401] Token invalid"
{
    "detail": "Token inválido."
}
```

## Resend a Prescription

#### POST Resend a Prescription
```python title="POST /api/v2/rx/resend/{{signature}}/"
import requests
import json

url = "{{Base_URL}}/api/v2/rx/resend/{{signature}}/"

payload = json.dumps({
  "email": "paciente@prescrypto.com",
  "cc": "copia@prescrypto.com"
})
headers = {
  'Authorization': 'Token {{Token}}',
  'Content-Type': 'application/json'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)
```

#### Respose to Resend a Prescription
```json title="[StatusCode: 200] Success! "
{
    "detail": "Se ha re-enviado la receta, si persisten problemas de envio, verifique que su paciente haya aceptado recibir correo de parte de Prescrypto así como que no esté llegando a la bandeja de correos no deseados."
}
```

```json title="[Error: 404] Rx not found"
{
    "detail": "Receta no encontrada con signature: 1234567890"
}
```
```json title="[Error: 401] Token invalid"
{
    "detail": "Token inválido."
}
```

## Download a Prescription in PDF(Base64)
Prescriptions can be downloaded in their PDF representation with this endpoint, the response will be in base64, which will be needed to decode from base64 to PDF.

#### GET Download a Prescription
```python title="GET /api/v2/rx/pdf/{{eRx_Signature}}/"
import requests

url = "{{Base_URL}}/api/v2/rx/pdf/{{eRx_Signature}}/"

headers = {
  'Authorization': 'Token {{Token}}',
  'Content-Type': 'application/json'
}

response = requests.request("GET", url, headers=headers)

print(response.text)
```
#### Respose to Download a Prescription
```json title="[StatusCode: 200] Success! "
{
    "pdf": "pdf_in_base_64"
}
```
```json title="[Error: 404] Rx not found"
{
    "error": "rx not found"
}
```
```json title="[Error: 401] Token invalid"
{
    "detail": "Token inválido."
}
```


## Search Prescription 
A Prescription can be searched by the name of the [Patient](patient.md), the email, or the diagnosis.

#### GET Search Prescription
```python title="GET /api/v2/rx-endpoint/?search=Gripe/"
import requests

url = "{{Base_URL}}/api/v2/rx-endpoint/?search={{query}}"

headers = {
  'Authorization': 'Token {{Token}}'
}

response = requests.request("GET", url, headers=headers)

print(response.text)
```

#### Respose to Search Prescription
```json title="[StatusCode: 200] Success! "
{
    "id": 271,
    "hospital": {
        "id": 25,
        "patron": "Prescrypto",
        "location": "Avenida Paseo de la Reforma 369, Colonia Cuauhtémoc, Mexico City, CDMX, Mexico"
    },
    "clinic": null,
    "medic": "hola@prescrypto.com",
    "patient": {
        "uid": "123123-12312-12312-123-123123123",
        "name": "Ely de Prescrypto",
        "email": "hola@prescrypto.com",
        "phone": "",
        "date_of_birth": "1983-02-01",
        "gender": "M"
    },
    "diagnosis": "",
    "medications": [
        {
            "id": 23,
            "presentation": "Aspirina Protect",
            "instructions": "Tomar 1 pastilla cada 8 horas durante 7 dias",
            "cost": 0.0,
            "bought": false,
            "qty": 1,
            "bought_qty": 0,
            "drug_upc": "",
            "order_id": 0,
            "category": "standard_drug",
            "qty_label": "1"
        }
    ],
    "extras": "Indicaciones Extras",
    "signature": "12344567890",
    "created_at": "2023-09-08",
    "sent": null,
    "send_rx": true,
    "show_diagnosis": false,
    "bought": false,
    "rejected": false,
    "cta_link": "",
    "status": {
        "rx_status": [
            "available",
            "Disponible"
        ],
        "sent_status": [
            "pending",
            "Pendiente de envio"
        ]
    },
    "reason_of_rejected": ""
}
```
```json title="[Error: 401] Token invalid"
{
    "detail": "Token inválido."
}
```

[EOF]